{% extends 'base.html' %}
{% load humanize %}
{% load index %}
{% load static %}
{% block title %}
    {{ title }}
{% endblock %}
{% block content %}
    <section class="media content-section">
        <div class="media-body">
            <div class="row">
                <div class="col-12">
                    <h3 class="mb-2 pt-2"><strong>{{ title }}</strong></h3>
                </div>
            </div>
        </div>
    </section>
    <section class="media content-section text-CCL-Gold">
        <div class="row pt-2">
            <div class="col-lg-12">
                <span>You have the following options when searching the Cosmic Christ Love Library. You can search library records:</span>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-3 pt-2">
                <h6>Date Search:</h6>
                <span><strong>between dates:</strong></span><br>
                <span>- select from date</span><br>
                <span>- select to date</span><br>
                <span>- click the Search button</span>
            </div>
            <div class="col-lg-3 pt-2 pb-2">
                <h6>Attribute Search:</h6>
                <span>within the <strong>Title</strong></span><br>
                <span>within the <strong>Text</strong></span><br>
                <span>by <strong>Record Type</strong></span><br>
                <span>by <strong>Series</strong></span><br>
                <span>by <strong>Collection</strong></span><br>
                <span>by <strong>Master</strong></span><br>
                <span>by <strong>Supporting Master</strong></span><br>
                <span>by <strong>Tag:</strong></span><br>
                <span>- select/fill search focus (e.g. Text)</span><br>
                <span>- click the Search button</span>
            </div>
            <div class="col-lg-3 pt-2 pb-2">
                <h6>Date and Attribute Search:</h6>
                <span>by <strong>Title, Text, Record Type, Series, Master, Supporting Master </strong>or<strong> Tag between dates:</strong></span><br>
                <span>- select from date</span><br>
                <span>- select to date</span><br>
                <span>- select/fill search focus (e.g. Text)</span><br>
                <span>- click the Search button</span><br>
            </div>
            <div class="col-lg-3 pt-2 pb-2">
                <h6>Complex Search:</h6>
                <span>by <strong>Text in a Record Type:</strong></span><br>
                <span>- select/fill search focus (e.g. Text)</span><br>
                <span>- select Record Type</span><br>
                <span>- click the Search button</span><br>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 pt-2">
                <p>For more guidance on how to make the most of searching the CCL Library you can view a video <a href="{% url 'training' %}" class="text-CCL-Blue">here</a>.</p>
            </div>
        </div>
    </section>
    <section class="media content-section text-CCL-Gold">
        <form method="get">
            <div class="row pb-2 pt-2">
                <div class="col-lg-2">
                    <button type="submit" class="btn btn-CCL-Blue col-12" value="Search">Search</button>
                </div>
                <div class="col-lg-1 pt-2 text-center">
                    From:
                </div>
                <div class="col-lg-2">
                    <input
                            type="date"
                            name="start-date"
                            class="form-control"
                            value="{{ start_search_input }}"
                    >
                </div>
                <div class="col-lg-1 pt-2 text-center">
                    to:
                </div>
                <div class="col-lg-2">
                    <input
                            type="date"
                            name="end-date"
                            class="form-control"
                            value="{{ end_search_input }}"
                    >
                </div>
            </div>
            <div class="row pb-2 pt-2">
                <div class="col-lg-2 text-center"></div>
                <div class="col-lg-1 text-center pt-1">By:</div>
                <div class="col-lg-2">
                    <input
                            type="text"
                            name="title-search"
                            class="form-control"
                            value="{{ title_search_input }}"
                            placeholder="Title*"
                    >
                </div>
                <div class="col-lg-1 text-center pt-1">or:</div>
                <div class="col-lg-6">
                    <input
                            type="text"
                            name="text-search"
                            class="form-control"
                            value="{{ text_search_input }}"
                            placeholder="Text*"
                    >
                </div>
            </div>
            <div class="row pb-2 pt-2">
                <div class="col-lg-2 text-center"></div>
                <div class="col-lg-1 text-center pt-1">or:</div>

                <div class="col-lg-2">
                    <select name="record-type-search" class="form-control">
                        <option value="">Record Type</option>
                        <option value='Discourse'>Discourse</option>
                        <option value='Invocation'>Invocation</option>
                        <option value='Book'>Book</option>
                        <option value='Cosmic Review'>Cosmic Review</option>
                    </select>
                </div>
                <div class="col-lg-1 text-center pt-1">or:</div>

                <div class="col-lg-2">
                    <select name="series-search" class="form-control">
                        <option value="">Series</option>
                        {% for record in series %}
                        <option value='{{ record.discourse_series }}'>{{ record.discourse_series }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-lg-1 text-center pt-1">or:</div>
                <div class="col-lg-3">
                    <select name="collection-search" class="form-control">
                        <option value="">Collection</option>
                        {% for collection in collections %}
                        <option value='{{ collection.collection }}'>{{ collection.collection }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="row pb-2 pt-2">
                <div class="col-lg-2 text-center"></div>
                <div class="col-lg-1 text-center pt-1">or:</div>

                <div class="col-lg-2">
                    <select name="author-search" class="form-control">
                        <option value="">Master</option>
                        {% for author in authors %}
                        <option value='{{ author.author }}'>{{ author.author }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-lg-1 text-center pt-1">or:</div>

                <div class="col-lg-2">
                    <select name="supporting-author-search" class="form-control">
                        <option value="">Supporting Master</option>
                        {% for author in authors %}
                        <option value='{{ author.author }}'>{{ author.author }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-lg-1 text-center pt-1">or:</div>
                <div class="col-lg-3">
                    <select name="tag-search" class="form-control">
                        <option value="">Tag (subject)</option>
                        {% for tag in tags %}
                        <option value='{{ tag.tag }}'>{{ tag.tag }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="row pb-2 pt-2">
            </div>
        </form>
        {% if search_error %}
        <div class="row">
            <div class="col-lg-12 pt-2">
                <p class="text-danger">When searching by date please ensure that the "from" date comes before the "to" date.</p>
            </div>
        </div>
        {% endif %}
        {% if search_on %}
        <div class="row pt-2">
            <div class="col-lg-9">
            {% if search_count == 0 and search_type == 'date' and same_day_search %}
                <p class="text-danger">There are no library records for the date, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_count == 0 and search_type == 'date' %}
                <p class="text-danger">There are no library records between {{ start_search_input }} and {{ end_search_input }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'date' %}
                {% if same_day_search %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} for the date {{ start_search_input }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
                {% else %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} between {{ start_search_input }} and {{ end_search_input }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
                {% endif %}

            {% elif search_count == 0 and search_type == 'title' %}
                <p class="text-danger">There are no library records with the title containing, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'title' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} with the title containing, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_count == 0 and search_type == 'date/title' %}
                <p class="text-danger">There are no library records {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'date/title' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>

            {% elif search_count == 0 and search_type == 'text' %}
                <p class="text-danger">There are no library records containing the text, "{{ search_entered }}" <span class="text-CCL-Gold">(search type: {{ search_type }})</span>. <br><em><span class="text-CCL-Gold">Please note that many library records are composed in UK English, and that the UK spelling of "glamour" is different from the US spelling of "glamor".</span></em></p>
            {% elif search_type == 'text' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} containing the text, "{{ search_entered }}" <span class="text-CCL-Gold">(search type: {{ search_type }})</span>. <br><em><span class="text-CCL-Gold">Please note that many library records are composed in UK English, and that the UK spelling of "glamour" is different from the US spelling of "glamor".</span></em></p>
            {% elif search_count == 0 and search_type == 'date/text' %}
                <p class="text-danger">There are no library records {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span>. <br><em><span class="text-CCL-Gold">Please note that many library records are composed in UK English, and that the UK spelling of "glamour" is different from the US spelling of "glamor".</span></em></p>
            {% elif search_type == 'date/text' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span>. <br><em><span class="text-CCL-Gold">Please note that many library records are composed in UK English, and that the UK spelling of "glamour" is different from the US spelling of "glamor".</span></em></p>

            {% elif search_count == 0 and search_type == 'record type' %}
                <p class="text-danger">There are no library records for the record type, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'record type' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} for the record type, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_count == 0 and search_type == 'date/record type' %}
                <p class="text-danger">There are no library records {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'date/record type' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_count == 0 and search_type == 'record type/text' %}
                <p class="text-danger">There are no library records {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'record type/text' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>

            {% elif search_count == 0 and search_type == 'series' %}
                <p class="text-danger">There are no library records for the series, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'series' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} for the series, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_count == 0 and search_type == 'date/series' %}
                <p class="text-danger">There are no library records {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'date/series' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>

            {% elif search_count == 0 and search_type == 'collection' %}
                <p class="text-danger">There are no library records for the collection, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'collection' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} for the collection, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>

            {% elif search_count == 0 and search_type == 'Master' %}
                <p class="text-danger">There are no library records from the Master, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'Master' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} from the Master, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_count == 0 and search_type == 'date/Master' %}
                <p class="text-danger">There are no library records {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'date/Master' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>

            {% elif search_count == 0 and search_type == 'supporting Master' %}
                <p class="text-danger">There are no library records with the supporting Master, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'supporting Master' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} with the supporting Master, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_count == 0 and search_type == 'date/supporting Master' %}
                <p class="text-danger">There are no library records {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'date/supporting Master' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>

            {% elif search_count == 0 and search_type == 'tag' %}
                <p class="text-danger">There are no library records with the tag, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'tag' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} with the tag, {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_count == 0 and search_type == 'date/tag' %}
                <p class="text-danger">There are no library records {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>
            {% elif search_type == 'date/tag' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} <span class="text-CCL-Gold">(search type: {{ search_type }})</span></p>

            {% endif %}
            </div>
            <div class="col-lg-3 pb-2">
                <a href="{% url 'search' %}" class="btn btn-outline-CCL-Blue col-12">Clear Search</a>
            </div>
        </div>
        {% endif %}
    </section>
    {% if search_on %}

    <section class="content-section text-CCL-Gold">
        <div class="row pt-2">
            <div class="col-lg-12">
                <h4>Library Records returned by Search</h4>
            </div>
        </div>
        {% for record in library_records %}
        <section class="list-group-item list-group-item-light text-CCL-Gold {% cycle 'row1' 'row2' %} pt-3 pb-2">
            <div class="row">
                <div class="col-lg-8">
                    <h6><a href="{% url 'library-record' record.id %}" class="text-CCL-Blue">{% if record.part_number %}Part {{ record.part_number }} - {% endif %} {% if record.discourse_series.discourse_series %}{{ record.discourse_series.discourse_series }} <br>{% endif %}{{ record.title }}</a></h6>
                </div>
                <div class="col-lg-4">
                    <h6 class="text-CCL-Gold text-end"> {{ record.principal_cosmic_author }}<br>{{ record.date_communicated }}</h6>
                </div>
            </div>
        </section>
        {% endfor %}
        <div class="row pb-2"></div>
    </section>

{#    {% for record in library_records %}#}
{#    <section class="list-group-item list-group-item-light {% cycle 'row1' 'row2' %}">#}
{#        <div class="row pt-2 pb-2">#}
{#            <div class="col-lg-12">#}
{#                {% if record.library_record_type == 'Discourse' %}#}
{#                    {% if record.discourse_series and record.part_number %}#}
{#                    <p><a href="{% url 'library-record' record.id %}" class="text-CCL-Blue">{% if search_type == 'collection' %}{{ collection_order_number|index:forloop.counter0 }}) {% endif %}Part {{ record.part_number }} - {{ record.discourse_series }} - {{ record.title }} - {{ record.principal_cosmic_author }} - {{ record.date_communicated }}</a></p>#}
{#                    {% elif record.discourse_series and not record.part_number %}#}
{#                    <p><a href="{% url 'library-record' record.id %}" class="text-CCL-Blue">{% if search_type == 'collection' %}{{ collection_order_number|index:forloop.counter0 }}) {% endif %}{{ record.discourse_series }} - {{ record.title }} - {{ record.principal_cosmic_author }} - {{ record.date_communicated }}</a></p>#}
{#                    {% else %}#}
{#                    <p><a href="{% url 'library-record' record.id %}" class="text-CCL-Blue">{% if search_type == 'collection' %}{{ collection_order_number|index:forloop.counter0 }}) {% endif %}{{ record.title }} - {{ record.principal_cosmic_author }} - {{ record.date_communicated }}</a></p>#}
{#                    {% endif %}#}
{#                {% else %}#}
{#                <p><a href="{% url 'library-record' record.id %}" class="text-CCL-Blue">{% if search_type == 'collection' %}{{ collection_order_number|index:forloop.counter0 }}) {% endif %}{{ record.title }} - {{ record.principal_cosmic_author }} - {{ record.date_communicated }}</a></p>#}
{#                {% endif %}#}
{#            </div>#}
{#        </div>#}
{#    </section>#}
{#    {% endfor %}#}
    {% endif %}
{% endblock content %}