{% extends 'base.html' %}
{% load humanize %}
{% load static %}
{% block title %}
    {{ title }}
{% endblock %}
{% block content %}
    <section class="media content-section">
        <div class="media-body">
            <div class="row">
                <div class="col-12">
                    <h3 class="mb-2 pt-2"><strong>{{ title }}</strong></h3>
                </div>
            </div>
        </div>
    </section>
    <section class="media content-section text-CCL-Gold">
        <div class="row pt-2 pb-2">
            <div class="col-sm-12">
                <p>You have the following options when searching the Cosmic Christ Love Library. You can search:</p>
                <ul>
                    <li>between dates (select a from and to date and then click the Search button), or</li>
                    <li>within the Title or Text of the entire record, or</li>
                    <li>by a Record Type, Series (records published as a part of a series of records), by Tag (subject), or</li>
                    <li>by Principal Author, Supporting Author, or</li>
                    <li>any of the above (Title, Text, Record Type, Series, Tag, Principal Author, or Supporting Author) within a date range, or</li>
                    <li>by Text within a Record type.</li>
                </ul>
            </div>
        </div>
        <form method="get">
            <div class="row pb-2">
                <div class="col-sm-2">
                    <button type="submit" class="btn btn-CCL-Blue col-12" value="Search">Search</button>
                </div>
                <div class="col-sm-1 pt-2 text-center">
                    From:
                </div>
                <div class="col-sm-2">
                    <input
                            type="date"
                            name="start-date"
                            class="form-control"
                            value="{{ start_search_input }}"
{#                            placeholder="by Year"#}
                    >
                </div>
                <div class="col-sm-1 pt-2 text-center">
                    to:
                </div>
                <div class="col-sm-2">
                    <input
                            type="date"
                            name="end-date"
                            class="form-control"
                            value="{{ end_search_input }}"
{#                            placeholder="by Month"#}
                    >
                </div>
            </div>
            <div class="row pb-2 pt-2">
                <div class="col-sm-2 text-center"></div>
                <div class="col-sm-1 text-center pt-1">By:</div>
                <div class="col-sm-2">
                    <input
                            type="text"
                            name="title-search"
                            class="form-control"
                            value="{{ title_search_input }}"
                            placeholder="Title*"
                    >
                </div>
                <div class="col-sm-1 text-center pt-1">or:</div>
                <div class="col-sm-6">
                    <input
                            type="text"
                            name="text-search"
                            class="form-control"
                            value="{{ text_search_input }}"
                            placeholder="Text*"
                    >
                </div>
            </div>
            <div class="row pb-2 pt-2">
                <div class="col-sm-2 text-center"></div>
                <div class="col-sm-1 text-center pt-1">or:</div>

                <div class="col-sm-2">
                    <select name="record-type-search" class="form-control">
                        <option value="">Record Type</option>
                        <option value='Discourse'>Discourse</option>
                        <option value='Invocation'>Invocation</option>
                        <option value='Book'>Book</option>
                        <option value='Cosmic Review'>Cosmic Review</option>
                    </select>
                </div>
                <div class="col-sm-1 text-center pt-1">or:</div>

                <div class="col-sm-2">
                    <select name="series-search" class="form-control">
                        <option value="">Series</option>
                        {% for record in series %}
                        <option value='{{ record.discourse_series }}'>{{ record.discourse_series }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-sm-1 text-center pt-1">or:</div>

                <div class="col-sm-3">
                    <select name="tag-search" class="form-control">
                        <option value="">Tag</option>
                        {% for tag in tags %}
                        <option value='{{ tag.tag }}'>{{ tag.tag }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="row pb-2 pt-2">
                <div class="col-sm-2 text-center"></div>
                <div class="col-sm-1 text-center pt-1">or:</div>

                <div class="col-sm-2">
                    <select name="author-search" class="form-control">
                        <option value="">Principal Author</option>
                        {% for author in authors %}
                        <option value='{{ author.author }}'>{{ author.author }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-sm-1 text-center pt-1">or:</div>

                <div class="col-sm-2">
                    <select name="supporting-author-search" class="form-control">
                        <option value="">Supporting Author</option>
                        {% for author in authors %}
                        <option value='{{ author.author }}'>{{ author.author }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </form>
        {% if search_error %}
        <div class="row">
            <div class="col-sm-12 pt-2">
                <p class="text-danger">When searching by date please ensure that the "from" date comes before the "to" date.</p>
            </div>
        </div>
        {% endif %}
        {% if search_on %}
        <div class="row">
            <div class="col-sm-12 pt-2">
            {% if search_count == 0 and search_type == 'date' and same_day_search %}
                <p class="text-danger">There are no library records for the date, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_count == 0 and search_type == 'date' %}
                <p class="text-danger">There are no library records between {{ start_search_input }} and {{ end_search_input }} (search type: {{ search_type }})</p>
            {% elif search_type == 'date' %}
                {% if same_day_search %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} for the date {{ start_search_input }} (search type: {{ search_type }})</p>
                {% else %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} between {{ start_search_input }} and {{ end_search_input }} (search type: {{ search_type }})</p>
                {% endif %}

            {% elif search_count == 0 and search_type == 'title' %}
                <p class="text-danger">There are no library records with the title containing, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'title' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} with the title containing, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_count == 0 and search_type == 'date/title' %}
                <p class="text-danger">There are no library records {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'date/title' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} (search type: {{ search_type }})</p>

            {% elif search_count == 0 and search_type == 'text' %}
                <p class="text-danger">There are no library records containing the text, "{{ search_entered }}" (search type: {{ search_type }})</p>
            {% elif search_type == 'text' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} containing the text, "{{ search_entered }}" (search type: {{ search_type }})</p>
            {% elif search_count == 0 and search_type == 'date/text' %}
                <p class="text-danger">There are no library records {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'date/text' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} (search type: {{ search_type }})</p>

            {% elif search_count == 0 and search_type == 'record type' %}
                <p class="text-danger">There are no library records for the record type, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'record type' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} for the record type, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_count == 0 and search_type == 'date/record type' %}
                <p class="text-danger">There are no library records {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'date/record type' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_count == 0 and search_type == 'record type/text' %}
                <p class="text-danger">There are no library records {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'record type/text' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} (search type: {{ search_type }})</p>

            {% elif search_count == 0 and search_type == 'series' %}
                <p class="text-danger">There are no library records for the series, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'series' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} for the series, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_count == 0 and search_type == 'date/series' %}
                <p class="text-danger">There are no library records {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'date/series' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} (search type: {{ search_type }})</p>

            {% elif search_count == 0 and search_type == 'tag' %}
                <p class="text-danger">There are no library records with the tag, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'tag' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} with the tag, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_count == 0 and search_type == 'date/tag' %}
                <p class="text-danger">There are no library records {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'date/tag' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} (search type: {{ search_type }})</p>

            {% elif search_count == 0 and search_type == 'author' %}
                <p class="text-danger">There are no library records from the principal author, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'author' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} from the principal author, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_count == 0 and search_type == 'date/author' %}
                <p class="text-danger">There are no library records {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'date/author' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} (search type: {{ search_type }})</p>

            {% elif search_count == 0 and search_type == 'supporting author' %}
                <p class="text-danger">There are no library records with the supporting author, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'supporting author' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} with the supporting author, {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_count == 0 and search_type == 'date/supporting author' %}
                <p class="text-danger">There are no library records {{ search_entered }} (search type: {{ search_type }})</p>
            {% elif search_type == 'date/supporting author' %}
                <p class="text-CCL-Blue">There {{ search_count|pluralize:'is,are' }} {{ search_count }} library record{{ search_count|pluralize:'s' }} {{ search_entered }} (search type: {{ search_type }})</p>

            {% endif %}
            </div>
        </div>
        {% endif %}
    </section>
    {% if search_on %}
    {% for record in library_records %}
    <section class="list-group-item list-group-item-light {% cycle 'row1' 'row2' %}">
        <div class="row pt-2 pb-2">
            <div class="col-sm-12">
                {% if record.library_record_type == 'Discourse' %}
                    {% if record.part_number > 0 %}
                <p><a href="{% url 'library-record' record.id %}" class="text-CCL-Blue">Part {{ record.part_number }} - {{ record.discourse_series }} - {{ record.title }} - {{ record.date_communicated }}</a></p>
                    {% else %}
                <p><a href="{% url 'library-record' record.id %}" class="text-CCL-Blue">{{ record.discourse_series }} - {{ record.title }} - {{ record.date_communicated }}</a></p>
                    {% endif %}
                {% else %}
                <p><a href="{% url 'library-record' record.id %}" class="text-CCL-Blue">{{ record.title }}</a></p>
                {% endif %}
            </div>
        </div>
    </section>
    {% endfor %}
    {% endif %}
{% endblock content %}